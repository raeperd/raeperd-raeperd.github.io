<!doctype html><html lang=korean dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>database | raeperd.github.io</title>
<meta name=keywords content>
<meta name=description content="Better programmer">
<meta name=author content="raeperd">
<link rel=canonical href=https://raeperd.github.io/tags/database/>
<link href=/assets/css/stylesheet.min.css rel="preload stylesheet" as=style>
<link rel=icon href=https://raeperd.github.io/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://raeperd.github.io/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://raeperd.github.io/favicon-32x32.png>
<link rel=apple-touch-icon href=https://raeperd.github.io/apple-touch-icon.png>
<link rel=mask-icon href=https://raeperd.github.io/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.86.1">
<link rel=alternate type=application/rss+xml href=https://raeperd.github.io/tags/database/index.xml>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-168674186-1','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
<meta property="og:title" content="database">
<meta property="og:description" content="Better programmer">
<meta property="og:type" content="website">
<meta property="og:url" content="https://raeperd.github.io/tags/database/"><meta property="og:image" content="https://raeperd.github.io/papermod-cover.png"><meta property="og:site_name" content="raeperd.github.io">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://raeperd.github.io/papermod-cover.png">
<meta name=twitter:title content="database">
<meta name=twitter:description content="Better programmer">
</head>
<body class=list id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<noscript>
<style type=text/css>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://raeperd.github.io/ accesskey=h title="raeperd.github.io (Alt + H)">raeperd.github.io</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu onscroll=menu_on_scroll()>
<li>
<a href=https://raeperd.github.io/articles title=Article>
<span>Article</span>
</a>
</li>
<li>
<a href=https://raeperd.github.io/notes title=Note>
<span>Note</span>
</a>
</li>
<li>
<a href=https://raeperd.github.io/search title="Search (Alt + /)" accesskey=/>
<span>Search</span>
</a>
</li>
<li>
<a href=https://raeperd.github.io/archives/ title=Archives>
<span>Archives</span>
</a>
</li></ul>
</nav>
</header>
<main class=main>
<header class=page-header>
<h1>database</h1>
</header><ul class=terms-tags>
<li>
<a href=https://raeperd.github.io/tags/bug/>bug <sup><strong><sup>21</sup></strong></sup> </a>
</li>
<li>
<a href=https://raeperd.github.io/tags/cpp/>cpp <sup><strong><sup>12</sup></strong></sup> </a>
</li>
<li>
<a href=https://raeperd.github.io/tags/network/>network <sup><strong><sup>11</sup></strong></sup> </a>
</li>
<li>
<a href=https://raeperd.github.io/tags/kotlin/>kotlin <sup><strong><sup>10</sup></strong></sup> </a>
</li>
<li>
<a href=https://raeperd.github.io/tags/algorithm/>algorithm <sup><strong><sup>6</sup></strong></sup> </a>
</li>
<li>
<a href=https://raeperd.github.io/tags/database/>database <sup><strong><sup>6</sup></strong></sup> </a>
</li>
<li>
<a href=https://raeperd.github.io/tags/java/>java <sup><strong><sup>4</sup></strong></sup> </a>
</li>
<li>
<a href=https://raeperd.github.io/tags/docker/>docker <sup><strong><sup>3</sup></strong></sup> </a>
</li>
<li>
<a href=https://raeperd.github.io/tags/os/>os <sup><strong><sup>3</sup></strong></sup> </a>
</li>
<li>
<a href=https://raeperd.github.io/tags/python/>python <sup><strong><sup>3</sup></strong></sup> </a>
</li>
<li>
<a href=https://raeperd.github.io/tags/spring/>spring <sup><strong><sup>3</sup></strong></sup> </a>
</li>
<li>
<a href=https://raeperd.github.io/tags/assembly/>assembly <sup><strong><sup>2</sup></strong></sup> </a>
</li>
<li>
<a href=https://raeperd.github.io/tags/html/>html <sup><strong><sup>2</sup></strong></sup> </a>
</li>
<li>
<a href=https://raeperd.github.io/tags/machine-learning/>machine-learning <sup><strong><sup>2</sup></strong></sup> </a>
</li>
<li>
<a href=https://raeperd.github.io/tags/algoritm/>algoritm <sup><strong><sup>1</sup></strong></sup> </a>
</li>
<li>
<a href=https://raeperd.github.io/tags/bash/>bash <sup><strong><sup>1</sup></strong></sup> </a>
</li>
<li>
<a href=https://raeperd.github.io/tags/css/>css <sup><strong><sup>1</sup></strong></sup> </a>
</li>
<li>
<a href=https://raeperd.github.io/tags/devops/>devops <sup><strong><sup>1</sup></strong></sup> </a>
</li>
<li>
<a href=https://raeperd.github.io/tags/linux/>linux <sup><strong><sup>1</sup></strong></sup> </a>
</li>
</ul>
<br>
<article class=post-entry>
<header class=entry-header>
<h2>
Unable to Access Path Data
</h2>
<br>
<ul class=post-tags>
<li><a href=https://raeperd.github.io/tags/database/>database</a></li>
<li><a href=https://raeperd.github.io/tags/bug/>bug</a></li>
</ul>
</header>
<section class=entry-content>
<p>elasticsearch container 의 data path를 변경하면서 발견한 오류
변경한 경로를 docker container 에 volumn mount 에도 설정해줘야한다.
해당 설정을 kibana 와 공유도 해줘야함
version: '3' services: elastic: image: docker.elastic.co/elasticsearch/elasticsearch:7.9.1 environment: #ES_HEAP_SIZE: 16g path.data: /home/raecheol-park/elastic/data path.logs: /home/raecheol-park/elastic/logs NODE_OPTIONS: --max_old_space_size=4096 ES_JAVA_OPTS: -Xms2G -Xmx2G discovery.type: single-node xpack.security.enabled: "true" ELASTIC_PASSWORD: elastic1234 ports: - "9201:9200" volumes: - esdata:/home/raecheol-park/elastic/data - eslogs:/home/raecheol-park/elastic/logs kibana: image: docker.elastic.co/kibana/kibana:7.9.1 environment: ELASTICSEARCH_HOSTS: http://elastic:9200 ELASTICSEARCH_USERNAME: elastic ELASTICSEARCH_PASSWORD: elastic1234 #xpack.reporting.csv.maxSizeBytes: 304857600 ports: - "5602:5601" volumes: esdata: eslogs: Unable to access ‘path....</p>
</section>
<footer class=entry-footer>
February 21, 2021&nbsp;·&nbsp;raeperd
</footer>
<a class=entry-link aria-label="post link to Unable to Access Path Data" href=https://raeperd.github.io/notes/database/unable-to-access-path-data/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>
Duplicate Key Value Violates Unique Constraint Pkey
</h2>
<br>
<ul class=post-tags>
<li><a href=https://raeperd.github.io/tags/database/>database</a></li>
<li><a href=https://raeperd.github.io/tags/bug/>bug</a></li>
</ul>
</header>
<section class=entry-content>
<p>postgres.public> insert into url(created_date,address,vendor_id, malicious) values('2020-11-09 04:29:46.438652','http://pim-square.com/Korea/',2, True) [2020-11-09 13:38:29] [23505] ERROR: duplicate key value violates unique constraint "url_pkey" [2020-11-09 13:38:29] Detail: Key (id)=(1351) already exists. AUTO INCREMENT로 설정된 PRIMARY KEY 는 INSERT 할 때 명시하지 않아도 알아서 삽입되어야 하는데 중복이 됬다고 오류가 발생함.
로컬의 DB에서는 정상 동작하는 것으로 보아 query나 db constraint 같은 것이 원인은 아니는 듯 했다.
아래 링크에서 원인을 찾을 수 있었는데, db 의 sync가 나가서 생기는 문제라고 한다....</p>
</section>
<footer class=entry-footer>
November 9, 2020&nbsp;·&nbsp;raeperd
</footer>
<a class=entry-link aria-label="post link to Duplicate Key Value Violates Unique Constraint Pkey" href=https://raeperd.github.io/notes/database/duplicate-key-value-violates-unique-constraint-pkey/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>
Log Flood Stage Disk Watermark Exceeded
</h2>
<br>
<ul class=post-tags>
<li><a href=https://raeperd.github.io/tags/database/>database</a></li>
<li><a href=https://raeperd.github.io/tags/docker/>docker</a></li>
<li><a href=https://raeperd.github.io/tags/bug/>bug</a></li>
</ul>
</header>
<section class=entry-content>
<p>현상 Log flood stage disk watermark [95%] exceeded on – How To Solve Related Issues 해결방안 df 명령을 쳐보면 어디에 쓰고 있는지 보인다.
raecheol-park@dev:~/docker-elk$ df -h Filesystem Size Used Avail Use% Mounted on udev 16G 0 16G 0% /dev tmpfs 3.2G 339M 2.8G 11% /run /dev/sda2 438G 398G 18G 96% / tmpfs 16G 0 16G 0% /dev/shm tmpfs 5.0M 0 5.0M 0% /run/lock tmpfs 16G 0 16G 0% /sys/fs/cgroup /dev/md0 1....</p>
</section>
<footer class=entry-footer>
October 22, 2020&nbsp;·&nbsp;raeperd
</footer>
<a class=entry-link aria-label="post link to Log Flood Stage Disk Watermark Exceeded" href=https://raeperd.github.io/notes/database/log-flood-stage-disk-watermark-exceeded/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>
When to use `ON UPDATE` and `ON DELETE`
</h2>
<br>
<ul class=post-tags>
<li><a href=https://raeperd.github.io/tags/database/>database</a></li>
<li><a href=https://raeperd.github.io/tags/bug/>bug</a></li>
</ul>
</header>
<section class=entry-content>
<p>Foreign key constraints: When to use ON UPDATE and ON DELETE
Let’s look at the ON UPDATE clause:
ON UPDATE RESTRICT : the default : if you try to update a company_id in table COMPANY the engine will reject the operation if one USER at least links on this company. ON UPDATE NO ACTION : same as RESTRICT. ON UPDATE CASCADE : the best one usually : if you update a company_id in a row of table COMPANY the engine will update it accordingly on all USER rows referencing this COMPANY (but no triggers activated on USER table, warning)....</p>
</section>
<footer class=entry-footer>
October 10, 2020&nbsp;·&nbsp;raeperd
</footer>
<a class=entry-link aria-label="post link to When to use `ON UPDATE` and `ON DELETE`" href=https://raeperd.github.io/notes/database/on-update-vs-on-delete/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>
SQL Basic Part 2
</h2>
<br>
<ul class=post-tags>
<li><a href=https://raeperd.github.io/tags/database/>database</a></li>
</ul>
</header>
<section class=entry-content>
<p>SQL II 1 4
Motivation 또 게을러지기 시작해서 안하려고 한다. DB 관련 지식은 최근에 필요하다는게 많이 느껴져서 얼른얼른 알아가야한다. 이런데서 머뭇거리면 안된다
Contents Conceptual SQL Evaluation FROM WHERE SELECT GROUP BY HAVING DISTINCT (ORDER BY) (LIMIT) Putting it all together SELECT S.dept, AVG(S.gpa), COUNT(*) FROM Students S WHERE S.gender = 'F' GROUP BY S.dept HAVING COUNT(*) >= 2 ORDER BY S.dept; 이제까지는 하나의 테이블에서만 했는데 여러 테이블에 대한 쿼리를 할 수도 있다....</p>
</section>
<footer class=entry-footer>
September 25, 2020&nbsp;·&nbsp;raeperd
</footer>
<a class=entry-link aria-label="post link to SQL Basic Part 2" href=https://raeperd.github.io/notes/database/sql-basic-2/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>
SQL Basic Part 1
</h2>
<br>
<ul class=post-tags>
<li><a href=https://raeperd.github.io/tags/database/>database</a></li>
</ul>
</header>
<section class=entry-content>
<p>Motivation SQL 문법의 아주 기본적인 것부터 정리해두면 쓸 일이 많을 것 같아 정리를 시작하게 됨
Contents SQL’s Persistence Over 40 years old! Questioned repeatedly 90’s: Object-Oriented DBMS (OQL, etc.) 2000’s: XML (Xquery, Xpath, XSLT) 2010’s: NoSQL & MapReduce SQL keeps re-emerging as the standard Even Hadoop, Spark etc. mostly used via SQL May not be perfect, but it is useful SQL Pros and Cons Declarative!...</p>
</section>
<footer class=entry-footer>
September 25, 2020&nbsp;·&nbsp;raeperd
</footer>
<a class=entry-link aria-label="post link to SQL Basic Part 1" href=https://raeperd.github.io/notes/database/sql-basic-1/></a>
</article>
</main><footer class=footer>
<span>&copy; 2021 <a href=https://raeperd.github.io/>raeperd.github.io</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)">
<button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</button>
</a>
<script>window.onload=function(){localStorage.getItem("menu-scroll-position")&&(document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position"))};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft)}document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>