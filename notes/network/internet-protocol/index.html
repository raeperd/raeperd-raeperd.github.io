<!doctype html><html lang=korean dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Internet Protocol | raeperd.github.io</title>
<meta name=keywords content="network">
<meta name=description content="LAN 에서는 MAC 으로 기기간의 통신을 할 수 있다. 그런데 MAC 은 구조적으로 정렬된 주소는 아니다. 모든 네트워크 기기는 고유한 MAC 주소를 가지고 있지만, 특정 시점에 특정 MAC 주소를 가지는 기기가 지구상의 어디에 존재하는지는 알 방법이 없다. 분명히, 멀리 있는 기기간의 통신에서는 다른 종류의 해답이 필요하고, 이 문제를 3번째 Layer인 Network Layer에서 Internet Protocol 을 이용해 해결할 수 있다.
IP Address 4 byte 구성된 주소
 IP addresses belong to networks, not to the devices attached to those network">
<meta name=author content="raeperd">
<link rel=canonical href=https://raeperd.github.io/notes/network/internet-protocol/>
<link href=/assets/css/stylesheet.min.css rel="preload stylesheet" as=style>
<link rel=icon href=https://raeperd.github.io/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://raeperd.github.io/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://raeperd.github.io/favicon-32x32.png>
<link rel=apple-touch-icon href=https://raeperd.github.io/apple-touch-icon.png>
<link rel=mask-icon href=https://raeperd.github.io/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.86.1">
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-168674186-1','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
<meta property="og:title" content="Internet Protocol">
<meta property="og:description" content="LAN 에서는 MAC 으로 기기간의 통신을 할 수 있다. 그런데 MAC 은 구조적으로 정렬된 주소는 아니다. 모든 네트워크 기기는 고유한 MAC 주소를 가지고 있지만, 특정 시점에 특정 MAC 주소를 가지는 기기가 지구상의 어디에 존재하는지는 알 방법이 없다. 분명히, 멀리 있는 기기간의 통신에서는 다른 종류의 해답이 필요하고, 이 문제를 3번째 Layer인 Network Layer에서 Internet Protocol 을 이용해 해결할 수 있다.
IP Address 4 byte 구성된 주소
 IP addresses belong to networks, not to the devices attached to those network">
<meta property="og:type" content="article">
<meta property="og:url" content="https://raeperd.github.io/notes/network/internet-protocol/"><meta property="og:image" content="https://raeperd.github.io/papermod-cover.png"><meta property="article:section" content="notes">
<meta property="article:published_time" content="2020-05-12T00:00:00+00:00">
<meta property="article:modified_time" content="2020-05-12T00:00:00+00:00"><meta property="og:site_name" content="raeperd.github.io">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://raeperd.github.io/papermod-cover.png">
<meta name=twitter:title content="Internet Protocol">
<meta name=twitter:description content="LAN 에서는 MAC 으로 기기간의 통신을 할 수 있다. 그런데 MAC 은 구조적으로 정렬된 주소는 아니다. 모든 네트워크 기기는 고유한 MAC 주소를 가지고 있지만, 특정 시점에 특정 MAC 주소를 가지는 기기가 지구상의 어디에 존재하는지는 알 방법이 없다. 분명히, 멀리 있는 기기간의 통신에서는 다른 종류의 해답이 필요하고, 이 문제를 3번째 Layer인 Network Layer에서 Internet Protocol 을 이용해 해결할 수 있다.
IP Address 4 byte 구성된 주소
 IP addresses belong to networks, not to the devices attached to those network">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Notes","item":"https://raeperd.github.io/notes/"},{"@type":"ListItem","position":2,"name":"Internet Protocol","item":"https://raeperd.github.io/notes/network/internet-protocol/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Internet Protocol","name":"Internet Protocol","description":"LAN 에서는 MAC 으로 기기간의 통신을 할 수 있다. 그런데 MAC 은 구조적으로 정렬된 주소는 아니다. 모든 네트워크 기기는 고유한 MAC 주소를 가지고 있지만, 특정 시점에 특정 MAC 주소를 가지는 기기가 지구상의 어디에 존재하는지는 알 방법이 없다. 분명히, 멀리 있는 기기간의 통신에서는 다른 종류의 해답이 필요하고, 이 문제를 3번째 Layer인 Network Layer에서 Internet Protocol 을 이용해 해결할 수 있다.\nIP Address 4 byte 구성된 주소\n IP addresses belong to networks, not to the devices attached to those network","keywords":["network"],"articleBody":"LAN 에서는 MAC 으로 기기간의 통신을 할 수 있다. 그런데 MAC 은 구조적으로 정렬된 주소는 아니다. 모든 네트워크 기기는 고유한 MAC 주소를 가지고 있지만, 특정 시점에 특정 MAC 주소를 가지는 기기가 지구상의 어디에 존재하는지는 알 방법이 없다. 분명히, 멀리 있는 기기간의 통신에서는 다른 종류의 해답이 필요하고, 이 문제를 3번째 Layer인 Network Layer에서 Internet Protocol 을 이용해 해결할 수 있다.\nIP Address 4 byte 구성된 주소\n IP addresses belong to networks, not to the devices attached to those network\n 내 노트북은 항상 같은 MAC 주소를 가지지만 IP는 장소에 따라 다른 값을 가지게 된다. IP 주소는 대부분 사용자가 모르는 사이, 자동으로 부여되는데 Dynamic Host Configuration Protocol 이라는 기술로부터 그것이 가능하다.\nIP 주소는 Dynamic IP address 와 Static IP address 의 두가지 방법으로 할당되고 항상 그런 것은 아니지만 보통 서버의 경우 Static, Client의 경우 Dynamic 한 방법으로 부여된다.\n In most cases, static IP addresses are reserved for servers and network devices, while dynamic IP addresses are reserved for clients\n IP Datagrams and Encapsulation Ethernet layer의 패킷들이 Ethernet frame 의 형태를 가진 것처럼, Network layer의 패킷들도 특정한 형태를 가지게 된다. 이를 IP Datagram 이라 부른다. Ethernet의 경우보다 더 많은 정보를 가지고 있다. Ethernet frame과 마찬가지로 비트단위로 철저하게 정의되어 있다. IP Datagram 또한 header와 payload 로 크게 구분할 수 있다.\n￼\nVersion  Internet protocol 의 버전이 무엇인지 명시 가장 보편적인 버전은 4이다. 이를 보통 IPv4라 부른다.  Header Length  전체 헤더의 길이 IPv4의 경우 거의 항상 20byte 를 가리키게 된다. 이 크기가 IPv4 헤더가 가질 수 있는 최소의 크기이다.  Service Type  서비스의 품질(QOS: Quality of Service)을 나타내는 지표 라우터가 어떤 IP Datagram이 더 중요한지 판단하는 지표가 된다.  Total Length  말 그대로 전체 IP Datagram의 전체 길이를 나타낸다. 16bit 사이즈를 가지므로, IP Datagram 이 가질 수 있는 최대의 크기는 2^16 = 65535 이다   If the total amount of data that needs to be sent is larger than what can fit in a single datagram, the IP layer needs to split this data up into many individual packets.\n Identification  전체 길이가 2^16 보다 커지는 경우, 패킷은 여러번 나뉘어 보내져야한다. 이때 이부분이 같다면 같은 정보를 나타낸다는 것을 의미한다.  Flag / Fragment offset  Datagram 이 분할(Fragmentation) 될 수 있는지 혹은 이미 분할되어 있는지를 나타낸다.   Fragmentation  The process of taking a single IP datagram and splitting it up into several smaller datagrames     Datagram 의 최대 크기는 보통 보편적인 옵션을 공통적으로 사용하지만 이를 다르게 설정할 수도 있다.  이렇게 되면 크게 설정 되어있는 곳에서 작게 설정되어 있는 곳으로 패킷이 움직일때는 패킷이 분할될 필요가 있다. 이 필드는 받는 쪽에서 올바른 순서로 분할된 패킷을 다시 합치는데에 사용된다.    TTL (Time to live)  An 8 bit field that indicates how many router hops a datagram can traverse before it’s thrown away   Datagram이 버려지기전에 몇번이나 라우터를 거칠 수 있는지를 나타낸다. 새로운 라우터에 Datagram이 지나갈때 마다 이 값이 하나씩 감소되며, 0이 되는 순간 버려진다. 라우팅이 잘못 설정되었을때 무한히 돌아다니는 패킷이 없도록 하려면 이런 필드가 필요하다. 이 필드가 네트워크 관련된 설정의 디버깅에 유용하게 사용될 수 있다.  Protocol  어떤 Transport Layer Protocol 이 사용되는 지 명시한다 보통 TCP 나 UDP 를 많이 쓴다.  Header Checksum  IP datagram header의 체크섬 TTL이 라우터 마다 변경되기 때문에 이필드도 매번 다시 계산되어야 한다.  Source IP Address / Destination IP Address  말 그대로의 의미 IP 주소가 32bit 이기 때문에 당연히 각각 32bit 를 가진다.  Options  테스트 용도로 주로 사용되는 필드 있어도되고 없어도 되며 길이도 자유롭다.  Padding  Options 필드를 포함에서 전체 헤더의 크기가 일관되도록 0으로 패딩한다.  Encapsulation ￼ 전체 IP datagram은 Ethernet frame의 payload에 속한다. 마찬가지로 TCP packet은 IP Datagram의 payload에 속하게 된다. 이렇게 하나의 layer는 그 상위의 layer를 포함하며 가지는 구조를 가진다. 각각의 layer들은 상위 layer에게 필요한 구조를 가지게 된다.  IP Address Classes  IP Address는 network id 와 host id 로 구분될 수 있다. ￼  Address class system  A way of defining how the global IP address space is split up IP Address가 어떻게 구분되는지를 정의한 시스템.   Class A  First 1 bytes of network ID, 3 bytes of host ID   Class B  First 2 bytes of network ID, 2 bytes of host ID   class C  First 3 bytes of network ID, 1 bytes of host ID   IP 주소를 보는 것만으로 어떤 클래스 인지 확인할 수 있다. D class 와 E class는 특수한 목적에 사용되는 클래스로 비교적 덜 중요하다.  D는 멀티 캐스팅, E는 테스트를 하는 목적으로 사용된다. 실제로 이런 클래스 시스템은 대부분 CIDR (Classless inter-domain routing) 이라는 방법으로 대체되었다. 그럼에도 Address class system은 아직 많이 있고 네트워크 시스템 전반을 이해하는데 큰 도움이 되기 때문에 이해하고 있을 필요가 있다.    Address Resolution Protocol 이제까지 MAC이 어떻게 쓰이는지와 Data Link Layer가 어떻게 사용되는지를 각각 알아 보았는데, 이제 이 두 시스템이 서로 연결되는지 알아볼 차례다.\nARP는 특정 IP 주소를 통해 하드웨어의 주소를 찾기 위해 사용되는 프로토콜이다.\nIP Datagram은 Ethernet frame 의 내부에 속하게 되므로, 패킷을 전송하는 쪽에서 패킷을 완성하려면 전송하는 쪽의 MAC 주소를 알고 있어야 한다. 거의 모든 네트워크 장비들은 ARP Table 을 가지고 있는데 이는 IP 주소와 MAC 주소를 연결한 테이블이다. ARP Table에 주소가 있다면 그렇게 보내면 된다. 없다면 어떻게 해야할까￼\n 10.20.30.40 주소로 보내려는데 해당하는 MAC 주소를 알 수 없는 경우 Broadcast ARP Message를 보낸다. 10.20.30.40 IP 주소를 가진 기기가 이를 받으면 ARP Response 를 보내게 되는데 이 응답을 바탕으로 해당하는 MAC 주소를 알 수 있게 된다. 이제 이 정보를 ARP Table에 저장하면 다음번에 이 주소가 필요한 경우 같은 과정을 반복할 필요가 없어진다. ARP Table은 자주 파기 되기 때문에 한번 저장된 주소가 앞으로도 저장되어 있을것이라고 생각할 수 없다.  ","wordCount":"868","inLanguage":"korean","datePublished":"2020-05-12T00:00:00Z","dateModified":"2020-05-12T00:00:00Z","author":{"@type":"Person","name":"raeperd"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://raeperd.github.io/notes/network/internet-protocol/"},"publisher":{"@type":"Organization","name":"raeperd.github.io","logo":{"@type":"ImageObject","url":"https://raeperd.github.io/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<noscript>
<style type=text/css>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://raeperd.github.io/ accesskey=h title="raeperd.github.io (Alt + H)">raeperd.github.io</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu onscroll=menu_on_scroll()>
<li>
<a href=https://raeperd.github.io/articles title=Article>
<span>Article</span>
</a>
</li>
<li>
<a href=https://raeperd.github.io/notes title=Note>
<span>Note</span>
</a>
</li>
<li>
<a href=https://raeperd.github.io/search title="Search (Alt + /)" accesskey=/>
<span>Search</span>
</a>
</li>
<li>
<a href=https://raeperd.github.io/archives/ title=Archives>
<span>Archives</span>
</a>
</li></ul>
</nav>
</header>
<main class=main><article class=post-single>
<header class=post-header>
<h1 class=post-title>
Internet Protocol
</h1>
<div class=post-meta>
May 12, 2020&nbsp;·&nbsp;raeperd
</div>
<br>
<ul class=post-tags>
<li><a href=https://raeperd.github.io/tags/network/>network</a></li>
</ul>
</header>
<div class=post-content>
<p>LAN 에서는 MAC 으로 기기간의 통신을 할 수 있다. 그런데 MAC 은 구조적으로 정렬된 주소는 아니다. 모든 네트워크 기기는 고유한 MAC 주소를 가지고 있지만, 특정 시점에 특정 MAC 주소를 가지는 기기가 지구상의 어디에 존재하는지는 알 방법이 없다. 분명히, 멀리 있는 기기간의 통신에서는 다른 종류의 해답이 필요하고, 이 문제를 3번째 Layer인 Network Layer에서 Internet Protocol 을 이용해 해결할 수 있다.</p>
<h1 id=ip-address>IP Address<a hidden class=anchor aria-hidden=true href=#ip-address>#</a></h1>
<p><img loading=lazy src=https://i.ibb.co/3CLtfyr/ip-address.jpg alt>
4 byte 구성된 주소</p>
<blockquote>
<p>IP addresses belong to networks, not to the devices attached to those network</p>
</blockquote>
<p>내 노트북은 항상 같은 MAC 주소를 가지지만 IP는 장소에 따라 다른 값을 가지게 된다. IP 주소는 대부분 사용자가 모르는 사이, 자동으로 부여되는데 <strong>Dynamic Host Configuration Protocol</strong> 이라는 기술로부터 그것이 가능하다.</p>
<p>IP 주소는 <strong>Dynamic IP address</strong> 와 <strong>Static IP address</strong> 의 두가지 방법으로 할당되고 항상 그런 것은 아니지만 보통 서버의 경우 Static, Client의 경우 Dynamic 한 방법으로 부여된다.</p>
<blockquote>
<p>In most cases, static IP addresses are reserved for servers and network devices, while dynamic IP addresses are reserved for clients</p>
</blockquote>
<h2 id=ip-datagrams-and-encapsulation>IP Datagrams and Encapsulation<a hidden class=anchor aria-hidden=true href=#ip-datagrams-and-encapsulation>#</a></h2>
<p>Ethernet layer의 패킷들이 Ethernet frame 의 형태를 가진 것처럼, Network layer의 패킷들도 특정한 형태를 가지게 된다. 이를 IP Datagram 이라 부른다. Ethernet의 경우보다 더 많은 정보를 가지고 있다.
Ethernet frame과 마찬가지로 비트단위로 철저하게 정의되어 있다. IP Datagram 또한 header와 payload 로 크게 구분할 수 있다.</p>
<p><img loading=lazy src=https://i.ibb.co/F5TbCrJ/ip-datagram-header.jpg alt>
￼</p>
<h3 id=version>Version<a hidden class=anchor aria-hidden=true href=#version>#</a></h3>
<ul>
<li>Internet protocol 의 버전이 무엇인지 명시</li>
<li>가장 보편적인 버전은 4이다. 이를 보통 IPv4라 부른다.</li>
</ul>
<h3 id=header-length>Header Length<a hidden class=anchor aria-hidden=true href=#header-length>#</a></h3>
<ul>
<li>전체 헤더의 길이</li>
<li>IPv4의 경우 거의 항상 20byte 를 가리키게 된다. 이 크기가 IPv4 헤더가 가질 수 있는 최소의 크기이다.</li>
</ul>
<h3 id=service-type>Service Type<a hidden class=anchor aria-hidden=true href=#service-type>#</a></h3>
<ul>
<li>서비스의 품질(QOS: Quality of Service)을 나타내는 지표</li>
<li>라우터가 어떤 IP Datagram이 더 중요한지 판단하는 지표가 된다.</li>
</ul>
<h3 id=total-length>Total Length<a hidden class=anchor aria-hidden=true href=#total-length>#</a></h3>
<ul>
<li>말 그대로 전체 IP Datagram의 전체 길이를 나타낸다.</li>
<li>16bit 사이즈를 가지므로, IP Datagram 이 가질 수 있는 최대의 크기는 2^16 = 65535 이다</li>
</ul>
<blockquote>
<p>If the total amount of data that needs to be sent is larger than what can fit in a single datagram, the IP layer needs to split this data up into many individual packets.</p>
</blockquote>
<h3 id=identification>Identification<a hidden class=anchor aria-hidden=true href=#identification>#</a></h3>
<ul>
<li>전체 길이가 2^16 보다 커지는 경우, 패킷은 여러번 나뉘어 보내져야한다. 이때 이부분이 같다면 같은 정보를 나타낸다는 것을 의미한다.</li>
</ul>
<h3 id=flag--fragment-offset>Flag / Fragment offset<a hidden class=anchor aria-hidden=true href=#flag--fragment-offset>#</a></h3>
<ul>
<li>Datagram 이 분할(Fragmentation) 될 수 있는지 혹은 이미 분할되어 있는지를 나타낸다.</li>
</ul>
<ul>
<li>Fragmentation
<ul>
<li>The process of taking a single IP datagram and splitting it up into several smaller datagrames</li>
</ul>
</li>
</ul>
<ul>
<li>Datagram 의 최대 크기는 보통 보편적인 옵션을 공통적으로 사용하지만 이를 다르게 설정할 수도 있다.
<ul>
<li>이렇게 되면 크게 설정 되어있는 곳에서 작게 설정되어 있는 곳으로 패킷이 움직일때는 패킷이 분할될 필요가 있다.</li>
<li>이 필드는 받는 쪽에서 올바른 순서로 분할된 패킷을 다시 합치는데에 사용된다.</li>
</ul>
</li>
</ul>
<h3 id=ttl-time-to-live>TTL (Time to live)<a hidden class=anchor aria-hidden=true href=#ttl-time-to-live>#</a></h3>
<ul>
<li>An 8 bit field that indicates how many router hops a datagram can traverse before it’s thrown away</li>
</ul>
<p><img loading=lazy src=https://i.ibb.co/b3gqFvd/ttl.jpg alt>
</p>
<ul>
<li>Datagram이 버려지기전에 몇번이나 라우터를 거칠 수 있는지를 나타낸다.</li>
<li>새로운 라우터에 Datagram이 지나갈때 마다 이 값이 하나씩 감소되며, 0이 되는 순간 버려진다.</li>
<li>라우팅이 잘못 설정되었을때 무한히 돌아다니는 패킷이 없도록 하려면 이런 필드가 필요하다.</li>
<li>이 필드가 네트워크 관련된 설정의 디버깅에 유용하게 사용될 수 있다.</li>
</ul>
<h3 id=protocol>Protocol<a hidden class=anchor aria-hidden=true href=#protocol>#</a></h3>
<ul>
<li>어떤 Transport Layer Protocol 이 사용되는 지 명시한다</li>
<li>보통 TCP 나 UDP 를 많이 쓴다.</li>
</ul>
<h3 id=header-checksum>Header Checksum<a hidden class=anchor aria-hidden=true href=#header-checksum>#</a></h3>
<ul>
<li>IP datagram header의 체크섬</li>
<li><strong>TTL이 라우터 마다 변경되기 때문에 이필드도 매번 다시 계산되어야 한다.</strong></li>
</ul>
<h3 id=source-ip-address--destination-ip-address>Source IP Address / Destination IP Address<a hidden class=anchor aria-hidden=true href=#source-ip-address--destination-ip-address>#</a></h3>
<ul>
<li>말 그대로의 의미</li>
<li>IP 주소가 32bit 이기 때문에 당연히 각각 32bit 를 가진다.</li>
</ul>
<h3 id=options>Options<a hidden class=anchor aria-hidden=true href=#options>#</a></h3>
<ul>
<li>테스트 용도로 주로 사용되는 필드</li>
<li>있어도되고 없어도 되며 길이도 자유롭다.</li>
</ul>
<h3 id=padding>Padding<a hidden class=anchor aria-hidden=true href=#padding>#</a></h3>
<ul>
<li>Options 필드를 포함에서 전체 헤더의 크기가 일관되도록 0으로 패딩한다.</li>
</ul>
<h3 id=encapsulation>Encapsulation<a hidden class=anchor aria-hidden=true href=#encapsulation>#</a></h3>
<p>￼<img loading=lazy src=https://i.ibb.co/7Q0x9zv/message-encapsulation.jpg alt>
</p>
<ul>
<li>전체 IP datagram은 Ethernet frame의 payload에 속한다.</li>
<li>마찬가지로 TCP packet은 IP Datagram의 payload에 속하게 된다.</li>
<li>이렇게 하나의 layer는 그 상위의 layer를 포함하며 가지는 구조를 가진다.</li>
<li>각각의 layer들은 상위 layer에게 필요한 구조를 가지게 된다.</li>
</ul>
<h2 id=ip-address-classes>IP Address Classes<a hidden class=anchor aria-hidden=true href=#ip-address-classes>#</a></h2>
<p><img loading=lazy src=https://i.ibb.co/Wyh8FC7/ip-address-classes.jpg alt>
</p>
<ul>
<li>IP Address는 network id 와 host id 로 구분될 수 있다.
￼</li>
</ul>
<h3 id=address-class-system>Address class system<a hidden class=anchor aria-hidden=true href=#address-class-system>#</a></h3>
<ul>
<li>A way of defining how the global IP address space is split up</li>
<li>IP Address가 어떻게 구분되는지를 정의한 시스템.</li>
</ul>
<p><img loading=lazy src=https://i.ibb.co/8NFcgTC/ip-address-class-system.jpg alt>
</p>
<ul>
<li>Class A
<ul>
<li>First 1 bytes of network ID, 3 bytes of host ID</li>
</ul>
</li>
<li>Class B
<ul>
<li>First 2 bytes of network ID, 2 bytes of host ID</li>
</ul>
</li>
<li>class C
<ul>
<li>First 3 bytes of network ID, 1 bytes of host ID</li>
</ul>
</li>
<li>IP 주소를 보는 것만으로 어떤 클래스 인지 확인할 수 있다.</li>
<li>D class 와 E class는 특수한 목적에 사용되는 클래스로 비교적 덜 중요하다.
<ul>
<li>D는 멀티 캐스팅, E는 테스트를 하는 목적으로 사용된다.</li>
<li>실제로 이런 클래스 시스템은 대부분 <strong>CIDR (Classless inter-domain routing)</strong> 이라는 방법으로 대체되었다.</li>
<li>그럼에도 Address class system은 아직 많이 있고 네트워크 시스템 전반을 이해하는데 큰 도움이 되기 때문에 이해하고 있을 필요가 있다.</li>
</ul>
</li>
</ul>
<h1 id=address-resolution-protocol>Address Resolution Protocol<a hidden class=anchor aria-hidden=true href=#address-resolution-protocol>#</a></h1>
<p>이제까지 MAC이 어떻게 쓰이는지와 Data Link Layer가 어떻게 사용되는지를 각각 알아 보았는데, 이제 이 두 시스템이 서로 연결되는지 알아볼 차례다.</p>
<p>ARP는 특정 IP 주소를 통해 하드웨어의 주소를 찾기 위해 사용되는 프로토콜이다.</p>
<p>IP Datagram은 Ethernet frame 의 내부에 속하게 되므로, 패킷을 전송하는 쪽에서 패킷을 완성하려면 전송하는 쪽의 MAC 주소를 알고 있어야 한다. 거의 모든 네트워크 장비들은 ARP Table 을 가지고 있는데 이는 IP 주소와 MAC 주소를 연결한 테이블이다. ARP Table에 주소가 있다면 그렇게 보내면 된다. 없다면 어떻게 해야할까￼</p>
<ol>
<li>10.20.30.40 주소로 보내려는데 해당하는 MAC 주소를 알 수 없는 경우 Broadcast ARP Message를 보낸다.</li>
<li>10.20.30.40 IP 주소를 가진 기기가 이를 받으면 ARP Response 를 보내게 되는데 이 응답을 바탕으로 해당하는 MAC 주소를 알 수 있게 된다.</li>
<li>이제 이 정보를 ARP Table에 저장하면 다음번에 이 주소가 필요한 경우 같은 과정을 반복할 필요가 없어진다.</li>
<li>ARP Table은 자주 파기 되기 때문에 한번 저장된 주소가 앞으로도 저장되어 있을것이라고 생각할 수 없다.</li>
</ol>
</div>
<footer class=post-footer>
<div class=share-buttons>
<a target=_blank rel="noopener noreferrer" aria-label="share Internet Protocol on twitter" href="https://twitter.com/intent/tweet/?text=Internet%20Protocol&url=https%3a%2f%2fraeperd.github.io%2fnotes%2fnetwork%2finternet-protocol%2f&hashtags=network"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Internet Protocol on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fraeperd.github.io%2fnotes%2fnetwork%2finternet-protocol%2f&title=Internet%20Protocol&summary=Internet%20Protocol&source=https%3a%2f%2fraeperd.github.io%2fnotes%2fnetwork%2finternet-protocol%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Internet Protocol on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fraeperd.github.io%2fnotes%2fnetwork%2finternet-protocol%2f&title=Internet%20Protocol"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Internet Protocol on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fraeperd.github.io%2fnotes%2fnetwork%2finternet-protocol%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Internet Protocol on whatsapp" href="https://api.whatsapp.com/send?text=Internet%20Protocol%20-%20https%3a%2f%2fraeperd.github.io%2fnotes%2fnetwork%2finternet-protocol%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Internet Protocol on telegram" href="https://telegram.me/share/url?text=Internet%20Protocol&url=https%3a%2f%2fraeperd.github.io%2fnotes%2fnetwork%2finternet-protocol%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg>
</a>
</div>
</footer><div id=disqus_thread></div>
<script>(function(){var a=document,b=a.createElement('script');b.src='https://raeperd-github-io.disqus.com/embed.js',b.setAttribute('data-timestamp',+new Date),(a.head||a.body).appendChild(b)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
</article>
</main><footer class=footer>
<span>&copy; 2021 <a href=https://raeperd.github.io/>raeperd.github.io</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)">
<button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</button>
</a>
<script defer src=/assets/js/highlight.min.js onload=hljs.initHighlightingOnLoad()></script>
<script>window.onload=function(){localStorage.getItem("menu-scroll-position")&&(document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position"))};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft)}document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>