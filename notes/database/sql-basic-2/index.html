<!doctype html><html lang=korean dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>SQL Basic Part 2 | raeperd.github.io</title>
<meta name=keywords content="database">
<meta name=description content="SQL II 1 4
Motivation 또 게을러지기 시작해서 안하려고 한다. DB 관련 지식은 최근에 필요하다는게 많이 느껴져서 얼른얼른 알아가야한다. 이런데서 머뭇거리면 안된다
Contents Conceptual SQL Evaluation  FROM WHERE SELECT GROUP BY HAVING DISTINCT (ORDER BY) (LIMIT)  Putting it all together SELECT S.dept, AVG(S.gpa), COUNT(*) FROM Students S WHERE S.gender = 'F' GROUP BY S.dept HAVING COUNT(*) >= 2 ORDER BY S.dept; 이제까지는 하나의 테이블에서만 했는데 여러 테이블에 대한 쿼리를 할 수도 있다.">
<meta name=author content="raeperd">
<link rel=canonical href=https://raeperd.github.io/notes/database/sql-basic-2/>
<link href=/assets/css/stylesheet.min.css rel="preload stylesheet" as=style>
<link rel=icon href=https://raeperd.github.io/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://raeperd.github.io/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://raeperd.github.io/favicon-32x32.png>
<link rel=apple-touch-icon href=https://raeperd.github.io/apple-touch-icon.png>
<link rel=mask-icon href=https://raeperd.github.io/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.86.1">
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-168674186-1','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
<meta property="og:title" content="SQL Basic Part 2">
<meta property="og:description" content="SQL II 1 4
Motivation 또 게을러지기 시작해서 안하려고 한다. DB 관련 지식은 최근에 필요하다는게 많이 느껴져서 얼른얼른 알아가야한다. 이런데서 머뭇거리면 안된다
Contents Conceptual SQL Evaluation  FROM WHERE SELECT GROUP BY HAVING DISTINCT (ORDER BY) (LIMIT)  Putting it all together SELECT S.dept, AVG(S.gpa), COUNT(*) FROM Students S WHERE S.gender = 'F' GROUP BY S.dept HAVING COUNT(*) >= 2 ORDER BY S.dept; 이제까지는 하나의 테이블에서만 했는데 여러 테이블에 대한 쿼리를 할 수도 있다.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://raeperd.github.io/notes/database/sql-basic-2/"><meta property="og:image" content="https://raeperd.github.io/papermod-cover.png"><meta property="article:section" content="notes">
<meta property="article:published_time" content="2020-09-25T00:00:00+00:00">
<meta property="article:modified_time" content="2020-09-25T00:00:00+00:00"><meta property="og:site_name" content="raeperd.github.io">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://raeperd.github.io/papermod-cover.png">
<meta name=twitter:title content="SQL Basic Part 2">
<meta name=twitter:description content="SQL II 1 4
Motivation 또 게을러지기 시작해서 안하려고 한다. DB 관련 지식은 최근에 필요하다는게 많이 느껴져서 얼른얼른 알아가야한다. 이런데서 머뭇거리면 안된다
Contents Conceptual SQL Evaluation  FROM WHERE SELECT GROUP BY HAVING DISTINCT (ORDER BY) (LIMIT)  Putting it all together SELECT S.dept, AVG(S.gpa), COUNT(*) FROM Students S WHERE S.gender = 'F' GROUP BY S.dept HAVING COUNT(*) >= 2 ORDER BY S.dept; 이제까지는 하나의 테이블에서만 했는데 여러 테이블에 대한 쿼리를 할 수도 있다.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Notes","item":"https://raeperd.github.io/notes/"},{"@type":"ListItem","position":2,"name":"SQL Basic Part 2","item":"https://raeperd.github.io/notes/database/sql-basic-2/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"SQL Basic Part 2","name":"SQL Basic Part 2","description":"SQL II 1 4\nMotivation 또 게을러지기 시작해서 안하려고 한다. DB 관련 지식은 최근에 필요하다는게 많이 느껴져서 얼른얼른 알아가야한다. 이런데서 머뭇거리면 안된다\nContents Conceptual SQL Evaluation  FROM WHERE SELECT GROUP BY HAVING DISTINCT (ORDER BY) (LIMIT)  Putting it all together SELECT S.dept, AVG(S.gpa), COUNT(*) FROM Students S WHERE S.gender = \u0026#39;F\u0026#39; GROUP BY S.dept HAVING COUNT(*) \u0026gt;= 2 ORDER BY S.dept; 이제까지는 하나의 테이블에서만 했는데 여러 테이블에 대한 쿼리를 할 수도 있다.","keywords":["database"],"articleBody":" SQL II 1 4\nMotivation 또 게을러지기 시작해서 안하려고 한다. DB 관련 지식은 최근에 필요하다는게 많이 느껴져서 얼른얼른 알아가야한다. 이런데서 머뭇거리면 안된다\nContents Conceptual SQL Evaluation  FROM WHERE SELECT GROUP BY HAVING DISTINCT (ORDER BY) (LIMIT)  Putting it all together SELECT S.dept, AVG(S.gpa), COUNT(*) FROM Students S WHERE S.gender = 'F' GROUP BY S.dept HAVING COUNT(*) = 2 ORDER BY S.dept; 이제까지는 하나의 테이블에서만 했는데 여러 테이블에 대한 쿼리를 할 수도 있다.\nJoin Queries SELECT [DISTINCT] column expression list FROM table1 [AS t1], ... , tableN [AS tn] [WHERE predicate] [GROUP BY column list[HAVING predicate] ] [ORDER BY column list];  Likely a terribly inefficient startegy Query optimizer will find more efficient plans  Cross(Cartesian) Product  All pairs of tuples, concatenated  SELECT S.sid FROM Sailors AS S, Reserves AS R WHERE S.sid=R.sid; SELECT x.sname, x.age, y.sname AS sname2, y.age AS age2 FROM Sailors AS x, Sailors AS y WHERE x.age  y.age; String Comparisons Old school SQL SELECT S.sname FROM Sailors S WHERE S.sname LIKE 'B_%’; Standard Regular Expressions SELECT S.sname FROM Sailors S WHERE S.sname ~ 'B.*’; Compining Predicates SELECT R.sid FROM Boats B, Reserves R WHERE R.bid=B.bid AND (B.color='red' OR B.color='green'); Order matters SELECT R.sid FROM Boats B,Reserves R WHERE R.bid=B.bid AND (B.color='red’ AND B.color='green'); SELECT R.sid FROM Boats B, Reserves R WHERE R.bid=B.bid AND B.color='red' INTERSECT SELECT R.sid FROM Boats B, Reserves R WHERE R.bid=B.bid AND B.color='green'; Set Semantics  Set: a collection of distinct elements Standard ways of manipulating/combining sets  Union Intersect Except   Treat tuples within a relation as elements of a set  Default: Set Semantics R = {A, A, A, A, B, B, C, D}S = {A, A, B, B, B, C, E}\n UNION  {A, B, C, D, E}   INTERSECT  {A, B, C}   EXCEPT  {D}    “ALL”: Multiset Semantics R = {A, A, A, A, B, B, C, D} = {A(4), B(2), C(1), D(1)}\nS = {A, A, B, B, B, C, E} = {A(2), B(3), C(1), E(1)}\n UNION ALL: sum of cardinalities  {A(4+2), B(2+3), C(1+1), D(1+0), E(0+1)} = {A, A, A, A, A, A, B, B, B, B, B, C, C, D, E}   INTERSECT ALL: min of cardinalities  {A(min(4,2)),B(min(2,3)),C(min(1,1)),D(min(1,0)),E(min(0,1))}= {A, A,B, B,C}   “EXCEPT ALL”: Multiset Semantics  {A(4-2),B(2-3),C(1-1),D(1-0),E(0-1)}= {A, A,D,}    Nested Queries: IN Names of sailors who’ve reserved boat #102: SELECT S.sname FROM Sailors S WHERE S.sid IN (SELECT R.sid FROM Reserves R WHERE R.bid=102); Names of sailors who’ve not reserved boat #103: SELECT S.sname FROM Sailors S WHERE S.sid NOT IN (SELECT R.sid FROM Reserves R WHERE R.bid=103) ARGMAX  Correct or Incorrect?  SELECT MAX(S.rating) FROM Sailors S; vs\nSELECT S.*, MAX(S.rating) FROM Sailors S;  First query doesn’t have any information about sailors Second query selects all sailors  SELECT * FROM Sailors S WHERE S.rating = ALL (SELECT S2.rating FROM Sailors S2) vs\nSELECT * FROM Sailors S WHERE S.rating = (SELECT MAX(S2.rating) FROM Sailors S2)  All sailors that has max ratings ( ≥ 1 ) First saliors that has max ratings ( = 1 )  “Inner” Joins: Another Syntax SELECT s.*, r.bid FROM Sailors s, Reserves r WHERE s.sid = r.sid AND ... SELECT s.*, r.bid FROM Sailors s INNER JOIN Reserves r ON s.sid = r.sid WHERE ... Join Variants SELECT column expression list FROM table_name [INNER | NATURAL | {LEFT |RIGHT | FULL } {OUTER}] JOIN table_name ON qualification_list WHERE …;  INNER is default Inner Join what we’ve learned so far  Same thing, just with different syntax    Inner / Natural Joins SELECT s.sid, s.sname, r.bid FROM Sailors s, Reserves r WHERE s.sid = r.sid AND s.age  20; SELECT s.sid, s.sname, r.bid FROM Sailors s INNER JOIN Reserves r ON s.sid = r.sid WHERE s.age  20; SELECT s.sid, s.sname, r.bid FROM Sailors s NATURAL JOIN Reserves r WHERE s.age  20;  All 3 are equivalent “NATURAL” means equal-join for pairs of attributes with the same name  natrual join은 피하는게 좋다. 컬럼이름이 바뀌거나 할 수 있는데, 그럴때마다 결과가 변할 것이다.    Outer Join Left Outer Join  Returns all matched rows, and preserves all unmatched rows from the table on the left of the join table on the left of the join clause  use nulls in field of non-matching tuples    Right Outer Join  Returns all matched rows, and preserves all unmatched rows from the table on the right of the join clause  use nulls in fields of non-matching tuples    Full Outer Join  Returns all (matched or unmatched) rows from the tables on both sides of the join clause  Views: Named Queries CREATE VIEW view_name AS select_statement;  Makes development simpler Often used for security  Allow access for speicific columns   Not “materialized”  View is not a snapshot Alias for statements    Views Instead of Relations in Queries CREATE VIEW Redcount AS SELECT B.bid, COUNT(*) AS scount FROM Boats2 B, Reserves2 R WHERE R.bid=B.bid AND B.color='red' GROUP BY B.bid; SELECT * from redcount; SELECT bname, scount FROM Redcount R, Boats2 B WHERE R.bid=B.bid AND scount  10; View on the fly SELECT bname, scount FROM Boats2 B, (SELECT B.bid, COUNT (*) FROM Boats2 B, Reserves2 R WHERE R.bid = B.bid AND B.color = 'red' GROUP BY B.bid) AS Reds(bid, scount) WHERE Reds.bid=B.bid AND scount  10 WITH Reds(bid, scount) AS (SELECT B.bid, COUNT (*) FROM Boats2 B, Reserves2 R WHERE R.bid = B.bid AND B.color = 'red' GROUP BY B.bid) SELECT bname, scount FROM Boats2 B, Reds WHERE Reds.bid=B.bid AND scount  10 WITH Reds(bid, scount) AS (SELECT B.bid, COUNT (*) FROM Boats2 B, Reserves2 R WHERE R.bid = B.bid AND B.color = 'red' GROUP BY B.bid), UnpopularReds AS (SELECT bname, scount FROM Boats2 B, Reds WHERE Reds.bid=B.bid AND scount  10) SELECT * FROM UnpopularReds; Argmax using view WITH maxratings(age, maxrating) AS (SELECT age, max(rating) FROM Sailors GROUP BY age) SELECT S.* FROM Sailors S, maxratings m WHERE S.age = m.age AND S.rating = m.maxrating; Null values  SQL 2 58 66\nBrief detour: Null values  Field values are sometimes unknown  SQL provides a special value NULL for such situations. Every data type can be NULL   The presence of null complicates many issues. E.g.:  Selection predicates (WHERE) Aggregation   But NULLs comes naturally from Outer joins  NULL in the WHERE clause  Consider tuple where rating is NULL  INSERT INTO sailors VALUES (11, 'Jack Sparrow', NULL, 35); SELECT * FROM sailors WHERE rating  8;  Should db select Jack Sparrow?  NULL in comparators  Rule (x op NULL) evaluates to NULL!  Explicit NULL Checks SELECT * FROM sailors WHERE rating IS NULL; SELECT * FROM sailors WHERE rating IS NOT NULL; NULL at top of WHERE  Rule: Do not output a tuple WHERE NULL  SELECT * FROM sailors; SELECT * FROM sailors WHERE rating  8; SELECT * FROM sailors WHERE rating  8;  아래 두 쿼리의 결과로 나온 row의 수의 합이 처음 쿼리의 갯수와 다를 수도 있다. null value 때문에  NULL in boolean logic    NOT T F N      F T N       AND T F N     T T F N   F F F F   N N F N       OR T F N     T T T T   F T F N   N T N N    NULL and Aggregation SELECT count(*) FROM sailors; SELECT count(rating) FROM sailors; SELECT sum(rating) FROM sailors; SELECT avg(rating) FROM sailors;  General rule: NULL column values are ignored by aggregate functions  NULLs: Summary  NULL op NULL is NULL WHERE NULL: do not send to output Boolean connectives: 3-valued logic Aggregates ignore NULL-valued inputs  Testing SQL Queries  SQL Fiddle pages we provide in this class will typically help you answer the questions in the worksheets and vitamins. But in real life:  not every database instance will reveal every bug in your query.  Eg: database instance without any rows in it!   Need to debug your queries reasoning about them carefully constructing test data.    ","wordCount":"1268","inLanguage":"korean","datePublished":"2020-09-25T00:00:00Z","dateModified":"2020-09-25T00:00:00Z","author":{"@type":"Person","name":"raeperd"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://raeperd.github.io/notes/database/sql-basic-2/"},"publisher":{"@type":"Organization","name":"raeperd.github.io","logo":{"@type":"ImageObject","url":"https://raeperd.github.io/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<noscript>
<style type=text/css>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://raeperd.github.io/ accesskey=h title="raeperd.github.io (Alt + H)">raeperd.github.io</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu onscroll=menu_on_scroll()>
<li>
<a href=https://raeperd.github.io/articles title=Article>
<span>Article</span>
</a>
</li>
<li>
<a href=https://raeperd.github.io/notes title=Note>
<span>Note</span>
</a>
</li>
<li>
<a href=https://raeperd.github.io/search title="Search (Alt + /)" accesskey=/>
<span>Search</span>
</a>
</li>
<li>
<a href=https://raeperd.github.io/archives/ title=Archives>
<span>Archives</span>
</a>
</li></ul>
</nav>
</header>
<main class=main><article class=post-single>
<header class=post-header>
<h1 class=post-title>
SQL Basic Part 2
</h1>
<div class=post-meta>
September 25, 2020&nbsp;·&nbsp;raeperd
</div>
<br>
<ul class=post-tags>
<li><a href=https://raeperd.github.io/tags/database/>database</a></li>
</ul>
</header>
<div class=toc>
<details>
<summary accesskey=c title="(Alt + C)">
<div class=details>Table of Contents</div>
</summary>
<div class=inner><ul><li>
<a href=#motivation aria-label=Motivation>Motivation</a></li><li>
<a href=#contents aria-label=Contents>Contents</a><ul>
<li>
<a href=#conceptual-sql-evaluation aria-label="Conceptual SQL Evaluation">Conceptual SQL Evaluation</a></li><li>
<a href=#putting-it-all-together aria-label="Putting it all together">Putting it all together</a></li><li>
<a href=#join-queries aria-label="Join Queries">Join Queries</a></li><li>
<a href=#crosscartesian-product aria-label="Cross(Cartesian) Product">Cross(Cartesian) Product</a></li><li>
<a href=#string-comparisons aria-label="String Comparisons">String Comparisons</a><ul>
<li>
<a href=#old-school-sql aria-label="Old school SQL">Old school SQL</a></li><li>
<a href=#standard-regular-expressions aria-label="Standard Regular Expressions">Standard Regular Expressions</a></li></ul>
</li><li>
<a href=#compining-predicates aria-label="Compining Predicates">Compining Predicates</a><ul>
<li>
<a href=#order-matters aria-label="Order matters">Order matters</a></li></ul>
</li><li>
<a href=#set-semantics aria-label="Set Semantics">Set Semantics</a></li><li>
<a href=#default-set-semantics aria-label="Default: Set Semantics">Default: Set Semantics</a></li><li>
<a href=#all-multiset-semantics aria-label="“ALL”: Multiset Semantics">“ALL”: Multiset Semantics</a></li><li>
<a href=#nested-queries-in aria-label="Nested Queries: IN">Nested Queries: IN</a><ul>
<li>
<a href=#names-of-sailors-whove-reserved-boat-102 aria-label="Names of sailors who’ve reserved boat #102:">Names of sailors who’ve reserved boat #102:</a></li><li>
<a href=#names-of-sailors-whove-not-reserved-boat-103 aria-label="Names of sailors who’ve not reserved boat #103:">Names of sailors who’ve not reserved boat #103:</a></li></ul>
</li><li>
<a href=#argmax aria-label=ARGMAX>ARGMAX</a></li><li>
<a href=#inner-joins-another-syntax aria-label="&amp;ldquo;Inner&amp;rdquo; Joins: Another Syntax">&ldquo;Inner&rdquo; Joins: Another Syntax</a></li><li>
<a href=#join-variants aria-label="Join Variants">Join Variants</a></li><li>
<a href=#inner--natural-joins aria-label="Inner / Natural Joins">Inner / Natural Joins</a></li><li>
<a href=#outer-join aria-label="Outer Join">Outer Join</a><ul>
<li>
<a href=#left-outer-join aria-label="Left Outer Join">Left Outer Join</a></li><li>
<a href=#right-outer-join aria-label="Right Outer Join">Right Outer Join</a></li><li>
<a href=#full-outer-join aria-label="Full Outer Join">Full Outer Join</a></li></ul>
</li><li>
<a href=#views-named-queries aria-label="Views: Named Queries">Views: Named Queries</a><ul>
<li>
<a href=#views-instead-of-relations-in-queries aria-label="Views Instead of Relations in Queries">Views Instead of Relations in Queries</a></li><li>
<a href=#view-on-the-fly aria-label="View on the fly">View on the fly</a></li><li>
<a href=#argmax-using-view aria-label="Argmax using view">Argmax using view</a></li></ul>
</li><li>
<a href=#null-values aria-label="Null values">Null values</a><ul>
<li>
<a href=#brief-detour-null-values aria-label="Brief detour: Null values">Brief detour: Null values</a></li><li>
<a href=#null-in-the-where-clause aria-label="NULL in the WHERE clause">NULL in the WHERE clause</a></li><li>
<a href=#null-in-comparators aria-label="NULL in comparators">NULL in comparators</a></li><li>
<a href=#explicit-null-checks aria-label="Explicit NULL Checks">Explicit NULL Checks</a></li><li>
<a href=#null-at-top-of-where aria-label="NULL at top of WHERE">NULL at top of WHERE</a></li><li>
<a href=#null-in-boolean-logic aria-label="NULL in boolean logic">NULL in boolean logic</a></li><li>
<a href=#null-and-aggregation aria-label="NULL and Aggregation">NULL and Aggregation</a></li><li>
<a href=#nulls-summary aria-label="NULLs: Summary">NULLs: Summary</a></li></ul>
</li><li>
<a href=#testing-sql-queries aria-label="Testing SQL Queries">Testing SQL Queries</a></li></ul>
</li></ul>
</div>
</details>
</div>
<div class=post-content>
<p>
<a href="https://www.youtube.com/watch?v=YWBJMGibSbs&list=PLzzVuDSjP25QapEtTMxw56ZtKRf62lkL_&ab_channel=CS186Berkeley" target=_blank>SQL II 1 4</a></p>
<h1 id=motivation>Motivation<a hidden class=anchor aria-hidden=true href=#motivation>#</a></h1>
<p>또 게을러지기 시작해서 안하려고 한다. DB 관련 지식은 최근에 필요하다는게 많이 느껴져서 얼른얼른 알아가야한다. 이런데서 머뭇거리면 안된다</p>
<h1 id=contents>Contents<a hidden class=anchor aria-hidden=true href=#contents>#</a></h1>
<h2 id=conceptual-sql-evaluation>Conceptual SQL Evaluation<a hidden class=anchor aria-hidden=true href=#conceptual-sql-evaluation>#</a></h2>
<ol>
<li>FROM</li>
<li>WHERE</li>
<li>SELECT</li>
<li>GROUP BY</li>
<li>HAVING</li>
<li>DISTINCT</li>
<li>(ORDER BY)</li>
<li>(LIMIT)</li>
</ol>
<h2 id=putting-it-all-together>Putting it all together<a hidden class=anchor aria-hidden=true href=#putting-it-all-together>#</a></h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>SELECT</span> S.dept, <span style=color:#66d9ef>AVG</span>(S.gpa), <span style=color:#66d9ef>COUNT</span>(<span style=color:#f92672>*</span>)
<span style=color:#66d9ef>FROM</span> Students S
<span style=color:#66d9ef>WHERE</span> S.gender <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;F&#39;</span>
<span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> S.dept 
<span style=color:#66d9ef>HAVING</span> <span style=color:#66d9ef>COUNT</span>(<span style=color:#f92672>*</span>) <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>2</span>
<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> S.dept;
</code></pre></div><p>이제까지는 하나의 테이블에서만 했는데 여러 테이블에 대한 쿼리를 할 수도 있다.</p>
<h2 id=join-queries>Join Queries<a hidden class=anchor aria-hidden=true href=#join-queries>#</a></h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>SELECT</span> [<span style=color:#66d9ef>DISTINCT</span>] <span style=color:#f92672>&lt;</span><span style=color:#66d9ef>column</span> expression list<span style=color:#f92672>&gt;</span>
<span style=color:#66d9ef>FROM</span> <span style=color:#f92672>&lt;</span>table1 [<span style=color:#66d9ef>AS</span> t1], ... , tableN [<span style=color:#66d9ef>AS</span> tn]<span style=color:#f92672>&gt;</span>
[<span style=color:#66d9ef>WHERE</span> <span style=color:#f92672>&lt;</span>predicate<span style=color:#f92672>&gt;</span>]
[<span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> <span style=color:#f92672>&lt;</span><span style=color:#66d9ef>column</span> list<span style=color:#f92672>&gt;</span>[<span style=color:#66d9ef>HAVING</span> <span style=color:#f92672>&lt;</span>predicate<span style=color:#f92672>&gt;</span>] ]
[<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> <span style=color:#f92672>&lt;</span><span style=color:#66d9ef>column</span> list<span style=color:#f92672>&gt;</span>];
</code></pre></div><ul>
<li>Likely a terribly inefficient startegy</li>
<li>Query optimizer will find more efficient plans</li>
</ul>
<h2 id=crosscartesian-product>Cross(Cartesian) Product<a hidden class=anchor aria-hidden=true href=#crosscartesian-product>#</a></h2>
<ul>
<li>All pairs of tuples, concatenated</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>SELECT</span> S.sid
<span style=color:#66d9ef>FROM</span> Sailors <span style=color:#66d9ef>AS</span> S, Reserves <span style=color:#66d9ef>AS</span> R
<span style=color:#66d9ef>WHERE</span> S.sid<span style=color:#f92672>=</span>R.sid;

<span style=color:#66d9ef>SELECT</span> x.sname, x.age, 
	y.sname <span style=color:#66d9ef>AS</span> sname2, 
	y.age <span style=color:#66d9ef>AS</span> age2
<span style=color:#66d9ef>FROM</span> Sailors <span style=color:#66d9ef>AS</span> x, Sailors <span style=color:#66d9ef>AS</span> y
<span style=color:#66d9ef>WHERE</span> x.age <span style=color:#f92672>&gt;</span> y.age;
</code></pre></div><h2 id=string-comparisons>String Comparisons<a hidden class=anchor aria-hidden=true href=#string-comparisons>#</a></h2>
<h3 id=old-school-sql>Old school SQL<a hidden class=anchor aria-hidden=true href=#old-school-sql>#</a></h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>SELECT</span> S.sname
<span style=color:#66d9ef>FROM</span>   Sailors S
<span style=color:#66d9ef>WHERE</span>  S.sname <span style=color:#66d9ef>LIKE</span> <span style=color:#e6db74>&#39;B_%’;
</span></code></pre></div><h3 id=standard-regular-expressions>Standard Regular Expressions<a hidden class=anchor aria-hidden=true href=#standard-regular-expressions>#</a></h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>SELECT</span> S.sname
<span style=color:#66d9ef>FROM</span>   Sailors S
<span style=color:#66d9ef>WHERE</span>  S.sname <span style=color:#f92672>~</span> <span style=color:#e6db74>&#39;B.*’;
</span></code></pre></div><h2 id=compining-predicates>Compining Predicates<a hidden class=anchor aria-hidden=true href=#compining-predicates>#</a></h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>SELECT</span> R.sid
<span style=color:#66d9ef>FROM</span>   Boats B, Reserves R
<span style=color:#66d9ef>WHERE</span>  R.bid<span style=color:#f92672>=</span>B.bid <span style=color:#66d9ef>AND</span>
(B.color<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;red&#39;</span> <span style=color:#66d9ef>OR</span> B.color<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;green&#39;</span>);
</code></pre></div><h3 id=order-matters>Order matters<a hidden class=anchor aria-hidden=true href=#order-matters>#</a></h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>SELECT</span> R.sid
<span style=color:#66d9ef>FROM</span> Boats B,Reserves R
<span style=color:#66d9ef>WHERE</span> R.bid<span style=color:#f92672>=</span>B.bid <span style=color:#66d9ef>AND</span> 
(B.color<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;red’ AND B.color=&#39;</span>green<span style=color:#e6db74>&#39;);
</span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>SELECT</span> R.sid
<span style=color:#66d9ef>FROM</span> Boats B, Reserves R
<span style=color:#66d9ef>WHERE</span> R.bid<span style=color:#f92672>=</span>B.bid <span style=color:#66d9ef>AND</span> B.color<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;red&#39;</span>
<span style=color:#66d9ef>INTERSECT</span>
<span style=color:#66d9ef>SELECT</span> R.sid
<span style=color:#66d9ef>FROM</span> Boats B, Reserves R
<span style=color:#66d9ef>WHERE</span> R.bid<span style=color:#f92672>=</span>B.bid <span style=color:#66d9ef>AND</span> B.color<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;green&#39;</span>;
</code></pre></div><h2 id=set-semantics>Set Semantics<a hidden class=anchor aria-hidden=true href=#set-semantics>#</a></h2>
<ul>
<li>Set: a collection of distinct elements</li>
<li>Standard ways of manipulating/combining sets
<ul>
<li>Union</li>
<li>Intersect</li>
<li>Except</li>
</ul>
</li>
<li>Treat tuples within a relation as elements of a set</li>
</ul>
<h2 id=default-set-semantics>Default: Set Semantics<a hidden class=anchor aria-hidden=true href=#default-set-semantics>#</a></h2>
<p>R = {A, A, A, A, B, B, C, D}S = {A, A, B, B, B, C, E}</p>
<ul>
<li>UNION
<ul>
<li>{A, B, C, D, E}</li>
</ul>
</li>
<li>INTERSECT
<ul>
<li>{A, B, C}</li>
</ul>
</li>
<li>EXCEPT
<ul>
<li>{D}</li>
</ul>
</li>
</ul>
<h2 id=all-multiset-semantics>“ALL”: Multiset Semantics<a hidden class=anchor aria-hidden=true href=#all-multiset-semantics>#</a></h2>
<p>R = {A, A, A, A, B, B, C, D} = {A(4), B(2), C(1), D(1)}</p>
<p>S = {A, A, B, B, B, C, E} = {A(2), B(3), C(1), E(1)}</p>
<ul>
<li>UNION ALL: sum of cardinalities
<ul>
<li>{A(4+2), B(2+3), C(1+1), D(1+0), E(0+1)} = {A, A, A, A, A, A, B, B, B, B, B, C, C, D, E}</li>
</ul>
</li>
<li>INTERSECT ALL: min of cardinalities
<ul>
<li>{A(min(4,2)),B(min(2,3)),C(min(1,1)),D(min(1,0)),E(min(0,1))}= {A, A,B, B,C}</li>
</ul>
</li>
<li>“EXCEPT ALL”: Multiset Semantics
<ul>
<li>{A(4-2),B(2-3),C(1-1),D(1-0),E(0-1)}= {A, A,D,}</li>
</ul>
</li>
</ul>
<h2 id=nested-queries-in>Nested Queries: IN<a hidden class=anchor aria-hidden=true href=#nested-queries-in>#</a></h2>
<h3 id=names-of-sailors-whove-reserved-boat-102>Names of sailors who’ve reserved boat #102:<a hidden class=anchor aria-hidden=true href=#names-of-sailors-whove-reserved-boat-102>#</a></h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>SELECT</span> S.sname
<span style=color:#66d9ef>FROM</span>   Sailors S
<span style=color:#66d9ef>WHERE</span>  S.sid <span style=color:#66d9ef>IN</span> 
(<span style=color:#66d9ef>SELECT</span>  R.sid
<span style=color:#66d9ef>FROM</span>    Reserves R
<span style=color:#66d9ef>WHERE</span>   R.bid<span style=color:#f92672>=</span><span style=color:#ae81ff>102</span>);
</code></pre></div><h3 id=names-of-sailors-whove-not-reserved-boat-103>Names of sailors who’ve not reserved boat #103:<a hidden class=anchor aria-hidden=true href=#names-of-sailors-whove-not-reserved-boat-103>#</a></h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>SELECT</span>  S.sname
<span style=color:#66d9ef>FROM</span>  Sailors S
<span style=color:#66d9ef>WHERE</span>  S.sid <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>IN</span> 
(<span style=color:#66d9ef>SELECT</span>  R.sid
<span style=color:#66d9ef>FROM</span>  Reserves R
<span style=color:#66d9ef>WHERE</span>  R.bid<span style=color:#f92672>=</span><span style=color:#ae81ff>103</span>)
</code></pre></div><h2 id=argmax>ARGMAX<a hidden class=anchor aria-hidden=true href=#argmax>#</a></h2>
<ul>
<li>Correct or Incorrect?</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>MAX</span>(S.rating)
<span style=color:#66d9ef>FROM</span> Sailors S;
</code></pre></div><p>vs</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>SELECT</span> S.<span style=color:#f92672>*</span>, <span style=color:#66d9ef>MAX</span>(S.rating)
<span style=color:#66d9ef>FROM</span> Sailors S;
</code></pre></div><ul>
<li>First query doesn&rsquo;t have any information about sailors</li>
<li>Second query selects all sailors</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span>
<span style=color:#66d9ef>FROM</span>   Sailors S
<span style=color:#66d9ef>WHERE</span>  S.rating <span style=color:#f92672>&gt;=</span> <span style=color:#66d9ef>ALL</span> 
(<span style=color:#66d9ef>SELECT</span>  S2.rating
<span style=color:#66d9ef>FROM</span>  Sailors S2)
</code></pre></div><p>vs</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span>
<span style=color:#66d9ef>FROM</span>   Sailors S
<span style=color:#66d9ef>WHERE</span>  S.rating <span style=color:#f92672>=</span> 
(<span style=color:#66d9ef>SELECT</span>  <span style=color:#66d9ef>MAX</span>(S2.rating)
<span style=color:#66d9ef>FROM</span>  Sailors S2)
</code></pre></div><ul>
<li>All sailors that has max ratings ( ≥ 1 )</li>
<li>First saliors that has max ratings ( = 1 )</li>
</ul>
<h2 id=inner-joins-another-syntax>&ldquo;Inner&rdquo; Joins: Another Syntax<a hidden class=anchor aria-hidden=true href=#inner-joins-another-syntax>#</a></h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>SELECT</span> s.<span style=color:#f92672>*</span>, r.bid
<span style=color:#66d9ef>FROM</span> Sailors s, Reserves r
<span style=color:#66d9ef>WHERE</span> s.sid <span style=color:#f92672>=</span> r.sid
<span style=color:#66d9ef>AND</span> ...

<span style=color:#66d9ef>SELECT</span> s.<span style=color:#f92672>*</span>, r.bid
<span style=color:#66d9ef>FROM</span> Sailors s <span style=color:#66d9ef>INNER</span> <span style=color:#66d9ef>JOIN</span> Reserves r
<span style=color:#66d9ef>ON</span> s.sid <span style=color:#f92672>=</span> r.sid
<span style=color:#66d9ef>WHERE</span> ...
</code></pre></div><h2 id=join-variants>Join Variants<a hidden class=anchor aria-hidden=true href=#join-variants>#</a></h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>&lt;</span><span style=color:#66d9ef>column</span> expression list<span style=color:#f92672>&gt;</span>
<span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>table_name</span>
[<span style=color:#66d9ef>INNER</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>NATURAL</span>
 <span style=color:#f92672>|</span> <span style=color:#960050;background-color:#1e0010>{</span><span style=color:#66d9ef>LEFT</span> <span style=color:#f92672>|</span><span style=color:#66d9ef>RIGHT</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>FULL</span> <span style=color:#960050;background-color:#1e0010>}</span> <span style=color:#960050;background-color:#1e0010>{</span><span style=color:#66d9ef>OUTER</span><span style=color:#960050;background-color:#1e0010>}</span>] <span style=color:#66d9ef>JOIN</span> <span style=color:#66d9ef>table_name</span>
<span style=color:#66d9ef>ON</span> <span style=color:#f92672>&lt;</span>qualification_list<span style=color:#f92672>&gt;</span>
<span style=color:#66d9ef>WHERE</span> <span style=color:#960050;background-color:#1e0010>…</span>;
</code></pre></div><ul>
<li>INNER is default</li>
<li>Inner Join what we&rsquo;ve learned so far
<ul>
<li>Same thing, just with different syntax</li>
</ul>
</li>
</ul>
<h2 id=inner--natural-joins>Inner / Natural Joins<a hidden class=anchor aria-hidden=true href=#inner--natural-joins>#</a></h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>SELECT</span> s.sid, s.sname, r.bid
<span style=color:#66d9ef>FROM</span> Sailors s, Reserves r
<span style=color:#66d9ef>WHERE</span> s.sid <span style=color:#f92672>=</span> r.sid
<span style=color:#66d9ef>AND</span> s.age <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>20</span>;

<span style=color:#66d9ef>SELECT</span> s.sid, s.sname, r.bid
<span style=color:#66d9ef>FROM</span> Sailors s <span style=color:#66d9ef>INNER</span> <span style=color:#66d9ef>JOIN</span> Reserves r
<span style=color:#66d9ef>ON</span> s.sid <span style=color:#f92672>=</span> r.sid
<span style=color:#66d9ef>WHERE</span> s.age <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>20</span>;

<span style=color:#66d9ef>SELECT</span> s.sid, s.sname, r.bid
<span style=color:#66d9ef>FROM</span> Sailors s <span style=color:#66d9ef>NATURAL</span> <span style=color:#66d9ef>JOIN</span> Reserves r
<span style=color:#66d9ef>WHERE</span> s.age <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>20</span>;
</code></pre></div><ul>
<li>All 3 are equivalent</li>
<li>&ldquo;NATURAL&rdquo; means equal-join for pairs of attributes with the same name
<ul>
<li><strong>natrual join은 피하는게 좋다.</strong></li>
<li>컬럼이름이 바뀌거나 할 수 있는데, 그럴때마다 결과가 변할 것이다.</li>
</ul>
</li>
</ul>
<h2 id=outer-join>Outer Join<a hidden class=anchor aria-hidden=true href=#outer-join>#</a></h2>
<h3 id=left-outer-join>Left Outer Join<a hidden class=anchor aria-hidden=true href=#left-outer-join>#</a></h3>
<ul>
<li>Returns all matched rows,
and preserves all unmatched rows from the table on the left
of the join table on the left of the join clause
<ul>
<li>use nulls in field of non-matching tuples</li>
</ul>
</li>
</ul>
<h3 id=right-outer-join>Right Outer Join<a hidden class=anchor aria-hidden=true href=#right-outer-join>#</a></h3>
<ul>
<li>Returns all matched rows,
and preserves all unmatched rows from the table on the right
of the join clause
<ul>
<li>use nulls in fields of non-matching tuples</li>
</ul>
</li>
</ul>
<h3 id=full-outer-join>Full Outer Join<a hidden class=anchor aria-hidden=true href=#full-outer-join>#</a></h3>
<ul>
<li><strong>Returns all (matched or unmatched) rows from the tables on both sides</strong> of the join clause</li>
</ul>
<h2 id=views-named-queries>Views: Named Queries<a hidden class=anchor aria-hidden=true href=#views-named-queries>#</a></h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>VIEW</span> view_name <span style=color:#66d9ef>AS</span> select_statement;
</code></pre></div><ul>
<li>Makes development simpler</li>
<li>Often used for security
<ul>
<li>Allow access for speicific columns</li>
</ul>
</li>
<li>Not “materialized”
<ul>
<li>View is not a snapshot</li>
<li>Alias for statements</li>
</ul>
</li>
</ul>
<h3 id=views-instead-of-relations-in-queries>Views Instead of Relations in Queries<a hidden class=anchor aria-hidden=true href=#views-instead-of-relations-in-queries>#</a></h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>VIEW</span> Redcount
<span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>SELECT</span> B.bid, <span style=color:#66d9ef>COUNT</span>(<span style=color:#f92672>*</span>) <span style=color:#66d9ef>AS</span> scount
<span style=color:#66d9ef>FROM</span> Boats2 B, Reserves2 R
<span style=color:#66d9ef>WHERE</span> R.bid<span style=color:#f92672>=</span>B.bid <span style=color:#66d9ef>AND</span> B.color<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;red&#39;</span>
<span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> B.bid;

<span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> redcount;

<span style=color:#66d9ef>SELECT</span> bname, scount
<span style=color:#66d9ef>FROM</span> Redcount R, Boats2 B
<span style=color:#66d9ef>WHERE</span> R.bid<span style=color:#f92672>=</span>B.bid
<span style=color:#66d9ef>AND</span> scount <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>10</span>;
</code></pre></div><h3 id=view-on-the-fly>View on the fly<a hidden class=anchor aria-hidden=true href=#view-on-the-fly>#</a></h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>SELECT</span>  bname, scount
<span style=color:#66d9ef>FROM</span> Boats2 B,
(<span style=color:#66d9ef>SELECT</span> B.bid, <span style=color:#66d9ef>COUNT</span> (<span style=color:#f92672>*</span>)
<span style=color:#66d9ef>FROM</span> Boats2 B, Reserves2 R
<span style=color:#66d9ef>WHERE</span> R.bid <span style=color:#f92672>=</span> B.bid <span style=color:#66d9ef>AND</span> B.color <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;red&#39;</span>
<span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> B.bid) <span style=color:#66d9ef>AS</span> Reds(bid, scount)
<span style=color:#66d9ef>WHERE</span>  Reds.bid<span style=color:#f92672>=</span>B.bid
<span style=color:#66d9ef>AND</span> scount <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>10</span>
<span style=color:#66d9ef>WITH</span> Reds(bid, scount) <span style=color:#66d9ef>AS</span>
(<span style=color:#66d9ef>SELECT</span> B.bid, <span style=color:#66d9ef>COUNT</span> (<span style=color:#f92672>*</span>)
<span style=color:#66d9ef>FROM</span> Boats2 B, Reserves2 R
<span style=color:#66d9ef>WHERE</span> R.bid <span style=color:#f92672>=</span> B.bid <span style=color:#66d9ef>AND</span> B.color <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;red&#39;</span>
<span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> B.bid)
<span style=color:#66d9ef>SELECT</span> bname, scount
<span style=color:#66d9ef>FROM</span> Boats2 B, Reds
<span style=color:#66d9ef>WHERE</span> Reds.bid<span style=color:#f92672>=</span>B.bid
<span style=color:#66d9ef>AND</span> scount <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>10</span>
<span style=color:#66d9ef>WITH</span> Reds(bid, scount) <span style=color:#66d9ef>AS</span>
(<span style=color:#66d9ef>SELECT</span> B.bid, <span style=color:#66d9ef>COUNT</span> (<span style=color:#f92672>*</span>)
<span style=color:#66d9ef>FROM</span> Boats2 B, Reserves2 R
<span style=color:#66d9ef>WHERE</span> R.bid <span style=color:#f92672>=</span> B.bid <span style=color:#66d9ef>AND</span> B.color <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;red&#39;</span>
<span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> B.bid),
UnpopularReds <span style=color:#66d9ef>AS</span>
(<span style=color:#66d9ef>SELECT</span> bname, scount
<span style=color:#66d9ef>FROM</span> Boats2 B, Reds
<span style=color:#66d9ef>WHERE</span> Reds.bid<span style=color:#f92672>=</span>B.bid
<span style=color:#66d9ef>AND</span> scount <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>10</span>)
<span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> UnpopularReds;
</code></pre></div><h3 id=argmax-using-view>Argmax using view<a hidden class=anchor aria-hidden=true href=#argmax-using-view>#</a></h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>WITH</span> maxratings(age, maxrating) <span style=color:#66d9ef>AS</span>
(<span style=color:#66d9ef>SELECT</span> age, <span style=color:#66d9ef>max</span>(rating) 
<span style=color:#66d9ef>FROM</span> Sailors
<span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> age)
<span style=color:#66d9ef>SELECT</span> S.<span style=color:#f92672>*</span>
  <span style=color:#66d9ef>FROM</span> Sailors S, maxratings m
 <span style=color:#66d9ef>WHERE</span> S.age <span style=color:#f92672>=</span> m.age
   <span style=color:#66d9ef>AND</span> S.rating <span style=color:#f92672>=</span> m.maxrating;
</code></pre></div><h2 id=null-values>Null values<a hidden class=anchor aria-hidden=true href=#null-values>#</a></h2>
<p>
<a href="https://www.youtube.com/watch?v=wTdfbRuJbps&list=PLzzVuDSjP25QapEtTMxw56ZtKRf62lkL_&index=12" target=_blank>SQL 2 58 66</a></p>
<h3 id=brief-detour-null-values>Brief detour: Null values<a hidden class=anchor aria-hidden=true href=#brief-detour-null-values>#</a></h3>
<ul>
<li>Field values are sometimes unknown
<ul>
<li>SQL provides a special value NULL for such situations.</li>
<li>Every data type can be NULL</li>
</ul>
</li>
<li>The presence of null complicates many issues. E.g.:
<ul>
<li>Selection predicates (WHERE)</li>
<li>Aggregation</li>
</ul>
</li>
<li>But NULLs comes naturally from Outer joins</li>
</ul>
<h3 id=null-in-the-where-clause>NULL in the WHERE clause<a hidden class=anchor aria-hidden=true href=#null-in-the-where-clause>#</a></h3>
<ul>
<li>Consider tuple where rating is NULL</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> sailors <span style=color:#66d9ef>VALUES</span>
(<span style=color:#ae81ff>11</span>, <span style=color:#e6db74>&#39;Jack Sparrow&#39;</span>, <span style=color:#66d9ef>NULL</span>, <span style=color:#ae81ff>35</span>);
<span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> sailors 
<span style=color:#66d9ef>WHERE</span> rating <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>8</span>;
</code></pre></div><ul>
<li>Should db select Jack Sparrow?</li>
</ul>
<h3 id=null-in-comparators>NULL in comparators<a hidden class=anchor aria-hidden=true href=#null-in-comparators>#</a></h3>
<ul>
<li>Rule (x op NULL) evaluates to NULL!</li>
</ul>
<h3 id=explicit-null-checks>Explicit NULL Checks<a hidden class=anchor aria-hidden=true href=#explicit-null-checks>#</a></h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> sailors <span style=color:#66d9ef>WHERE</span> rating <span style=color:#66d9ef>IS</span> <span style=color:#66d9ef>NULL</span>;
<span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> sailors <span style=color:#66d9ef>WHERE</span> rating <span style=color:#66d9ef>IS</span> <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>;
</code></pre></div><h3 id=null-at-top-of-where>NULL at top of WHERE<a hidden class=anchor aria-hidden=true href=#null-at-top-of-where>#</a></h3>
<ul>
<li>Rule: Do not output a tuple WHERE NULL</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> sailors;
<span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> sailors <span style=color:#66d9ef>WHERE</span> rating <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>8</span>;
<span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> sailors <span style=color:#66d9ef>WHERE</span> rating <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>8</span>;
</code></pre></div><ul>
<li>아래 두 쿼리의 결과로 나온 row의 수의 합이 처음 쿼리의 갯수와 다를 수도 있다.</li>
<li>null value 때문에</li>
</ul>
<h3 id=null-in-boolean-logic>NULL in boolean logic<a hidden class=anchor aria-hidden=true href=#null-in-boolean-logic>#</a></h3>
<table>
<thead>
<tr>
<th>NOT</th>
<th>T</th>
<th>F</th>
<th>N</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>F</td>
<td>T</td>
<td>N</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>AND</th>
<th>T</th>
<th>F</th>
<th>N</th>
</tr>
</thead>
<tbody>
<tr>
<td>T</td>
<td>T</td>
<td>F</td>
<td>N</td>
</tr>
<tr>
<td>F</td>
<td>F</td>
<td>F</td>
<td>F</td>
</tr>
<tr>
<td>N</td>
<td>N</td>
<td>F</td>
<td>N</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>OR</th>
<th>T</th>
<th>F</th>
<th>N</th>
</tr>
</thead>
<tbody>
<tr>
<td>T</td>
<td>T</td>
<td>T</td>
<td>T</td>
</tr>
<tr>
<td>F</td>
<td>T</td>
<td>F</td>
<td>N</td>
</tr>
<tr>
<td>N</td>
<td>T</td>
<td>N</td>
<td>N</td>
</tr>
</tbody>
</table>
<h3 id=null-and-aggregation>NULL and Aggregation<a hidden class=anchor aria-hidden=true href=#null-and-aggregation>#</a></h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>count</span>(<span style=color:#f92672>*</span>) <span style=color:#66d9ef>FROM</span> sailors;
<span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>count</span>(rating) <span style=color:#66d9ef>FROM</span> sailors;
<span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>sum</span>(rating) <span style=color:#66d9ef>FROM</span> sailors;
<span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>avg</span>(rating) <span style=color:#66d9ef>FROM</span> sailors;
</code></pre></div><ul>
<li>General rule: NULL <strong>column values</strong> are ignored by aggregate functions</li>
</ul>
<h3 id=nulls-summary>NULLs: Summary<a hidden class=anchor aria-hidden=true href=#nulls-summary>#</a></h3>
<ul>
<li>NULL op NULL is NULL</li>
<li>WHERE NULL: do not send to output</li>
<li>Boolean connectives: 3-valued logic</li>
<li>Aggregates ignore NULL-valued inputs</li>
</ul>
<h2 id=testing-sql-queries>Testing SQL Queries<a hidden class=anchor aria-hidden=true href=#testing-sql-queries>#</a></h2>
<ul>
<li>SQL Fiddle pages we provide in this class will typically help you answer the questions in the worksheets and vitamins.</li>
<li>But in real life:
<ul>
<li>not every database instance will reveal every bug in your query.
<ul>
<li>Eg: database instance without any rows in it!</li>
</ul>
</li>
<li>Need to debug your queries</li>
<li>reasoning about them carefully</li>
<li>constructing test data.</li>
</ul>
</li>
</ul>
</div>
<footer class=post-footer>
<div class=share-buttons>
<a target=_blank rel="noopener noreferrer" aria-label="share SQL Basic Part 2 on twitter" href="https://twitter.com/intent/tweet/?text=SQL%20Basic%20Part%202&url=https%3a%2f%2fraeperd.github.io%2fnotes%2fdatabase%2fsql-basic-2%2f&hashtags=database"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share SQL Basic Part 2 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fraeperd.github.io%2fnotes%2fdatabase%2fsql-basic-2%2f&title=SQL%20Basic%20Part%202&summary=SQL%20Basic%20Part%202&source=https%3a%2f%2fraeperd.github.io%2fnotes%2fdatabase%2fsql-basic-2%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share SQL Basic Part 2 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fraeperd.github.io%2fnotes%2fdatabase%2fsql-basic-2%2f&title=SQL%20Basic%20Part%202"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share SQL Basic Part 2 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fraeperd.github.io%2fnotes%2fdatabase%2fsql-basic-2%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share SQL Basic Part 2 on whatsapp" href="https://api.whatsapp.com/send?text=SQL%20Basic%20Part%202%20-%20https%3a%2f%2fraeperd.github.io%2fnotes%2fdatabase%2fsql-basic-2%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share SQL Basic Part 2 on telegram" href="https://telegram.me/share/url?text=SQL%20Basic%20Part%202&url=https%3a%2f%2fraeperd.github.io%2fnotes%2fdatabase%2fsql-basic-2%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg>
</a>
</div>
</footer><div id=disqus_thread></div>
<script>(function(){var a=document,b=a.createElement('script');b.src='https://raeperd-github-io.disqus.com/embed.js',b.setAttribute('data-timestamp',+new Date),(a.head||a.body).appendChild(b)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
</article>
</main><footer class=footer>
<span>&copy; 2021 <a href=https://raeperd.github.io/>raeperd.github.io</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)">
<button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</button>
</a>
<script defer src=/assets/js/highlight.min.js onload=hljs.initHighlightingOnLoad()></script>
<script>window.onload=function(){localStorage.getItem("menu-scroll-position")&&(document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position"))};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft)}document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>