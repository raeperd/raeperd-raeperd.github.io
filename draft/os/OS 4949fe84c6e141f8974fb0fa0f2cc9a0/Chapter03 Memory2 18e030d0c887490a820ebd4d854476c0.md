# Chapter03 Memory2

# Page Fault Handling

valid bit 가 1 이면 있는거임 

# Instruction Backup

![Chapter03%20Memory2%2018e030d0c887490a820ebd4d854476c0/Untitled.png](Chapter03%20Memory2%2018e030d0c887490a820ebd4d854476c0/Untitled.png)

페이지 폴트가 몇번이나 날 수 있을까? 

1. fetch 하다가 페이지 폴트 
2. First operand 
3. Second operand

- 각 영역이 두개의 페이지에 걸쳐 있다면, 두번 가져와야함
- 명령을 16bit 단위로 할당해야하는 제역을 주면서 어느정도 해결할 수 있다.

# Page Lock

![Chapter03%20Memory2%2018e030d0c887490a820ebd4d854476c0/Untitled%201.png](Chapter03%20Memory2%2018e030d0c887490a820ebd4d854476c0/Untitled%201.png)

Lock bit: 운영체제만 사용하는 비트. 이거는 교체하지 말아야지 

# Backing Store

![Chapter03%20Memory2%2018e030d0c887490a820ebd4d854476c0/Untitled%202.png](Chapter03%20Memory2%2018e030d0c887490a820ebd4d854476c0/Untitled%202.png)

- 일부 페이지는 메모리에, 일부페이지는 디스크에 있을 수 있다.
- (b) Disk map 을 이용해 Disk에 있는 페이지를 관리할 수 있다.

# Separation of Policy and Mechanism

Memory management system is divided intothree parts: three parts:

- A low-l l MMU h dl level MMU handler
- A page fault handler that is part of the kernel.
- An external pager running in user space.
    - 나중에 교체할 수 있도록

# Segmentation

- 가상 메모리를 구현하는 또 다른 방법
- 페이징은 고정된 크기의 페이지로 나누는 반면 Segment 는 가변 크기
- 시작 지점과 크기가 있다.

![Chapter03%20Memory2%2018e030d0c887490a820ebd4d854476c0/Untitled%203.png](Chapter03%20Memory2%2018e030d0c887490a820ebd4d854476c0/Untitled%203.png)

- 프로그램은 가변적인 영역의 모임이 세그먼트가 더 합리적이지 않을까?

![Chapter03%20Memory2%2018e030d0c887490a820ebd4d854476c0/Untitled%204.png](Chapter03%20Memory2%2018e030d0c887490a820ebd4d854476c0/Untitled%204.png)

![Chapter03%20Memory2%2018e030d0c887490a820ebd4d854476c0/Untitled%205.png](Chapter03%20Memory2%2018e030d0c887490a820ebd4d854476c0/Untitled%205.png)

- 세그먼트 테이블을 이용해서 주소를 변환하면 되는거 아닌가?
- Fragmentation 문제가 생긴다.
- 순수한 segment 도입은 문제가 있음

# Segmentation with Paging

![Chapter03%20Memory2%2018e030d0c887490a820ebd4d854476c0/Untitled%206.png](Chapter03%20Memory2%2018e030d0c887490a820ebd4d854476c0/Untitled%206.png)

- 근데 결국 다단계 페이지 테이블과 같은 원리아닌가?
- 그래서 문제가 생김

![Chapter03%20Memory2%2018e030d0c887490a820ebd4d854476c0/Untitled%207.png](Chapter03%20Memory2%2018e030d0c887490a820ebd4d854476c0/Untitled%207.png)

# Segmentation with Paging: The Pentium (1)

![Chapter03%20Memory2%2018e030d0c887490a820ebd4d854476c0/Untitled%208.png](Chapter03%20Memory2%2018e030d0c887490a820ebd4d854476c0/Untitled%208.png)